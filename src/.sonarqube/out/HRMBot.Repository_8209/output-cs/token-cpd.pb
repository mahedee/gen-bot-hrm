Ÿ

ZD:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\ApplicationDbContext.cs
	namespace 	
HRMBot
 
. 

Repository 
{ 
public 

class  
ApplicationDbContext %
:& '
	DbContext( 1
{ 
public		  
ApplicationDbContext		 #
(		# $
)		$ %
:		& '
base		( ,
(		, -
$str			- ú
)
		ú ù
{

 	
} 	
public 
DbSet 
< 
User 
> 
Users  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
DbSet 
< 
Employee 
> 
	Employees (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
DbSet 
< 
LeaveBalance !
>! "
LeaveBalances# 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 
DbSet 
< 
UserInfo 
> 
	UserInfos (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
} 
} ¸
]D:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\IUserRegisterRepository.cs
	namespace 	
HRMBot
 
. 

Repository 
{ 
public		 

	interface		 #
IUserRegisterRepository		 ,
{

 
Task 
< 
string 
>  
GenerateOtpCodeAsync )
() *
string* 0
id1 3
,3 4
string5 ;
mobileNumber< H
,H I
stringJ P
nameQ U
)U V
;V W
Task 
< 
bool 
> 
VarifyOtpAsync !
(! "
string" (
id) +
,+ ,
string- 3
otp4 7
)7 8
;8 9
Task 
< 
string 
> "
isAlreadyVerifiedAsync +
(+ ,
string, 2
id3 5
)5 6
;6 7
} 
} ˆ
nD:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\Migrations\201711041219471_InitialCreate.cs
	namespace 	
HRMBot
 
. 

Repository 
. 

Migrations &
{ 
public 

partial 
class 
InitialCreate &
:' (
DbMigration) 4
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
CreateTable

 
(

 
$str 
, 
c 
=> 
new 
{ 
UserId 
=  
c! "
." #
String# )
() *
nullable* 2
:2 3
false4 9
,9 :
	maxLength; D
:D E
$numF I
)I J
,J K
Name 
= 
c  
.  !
String! '
(' (
)( )
,) *
OneTimePassword '
=( )
c* +
.+ ,
String, 2
(2 3
)3 4
,4 5
MobileNumber $
=% &
c' (
.( )
String) /
(/ 0
)0 1
,1 2!
TemporaryMobileNumber -
=. /
c0 1
.1 2
String2 8
(8 9
)9 :
,: ;
} 
) 
. 

PrimaryKey 
( 
t 
=>  
t! "
." #
UserId# )
)) *
;* +
} 	
public 
override 
void 
Down !
(! "
)" #
{ 	
	DropTable 
( 
$str !
)! "
;" #
} 	
} 
} Á3
lD:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\Migrations\201711110808471_new-schemas.cs
	namespace 	
HRMBot
 
. 

Repository 
. 

Migrations &
{ 
public 

partial 
class 

newschemas #
:$ %
DbMigration& 1
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
CreateTable

 
(

 
$str 
,  
c 
=> 
new 
{ 
Id 
= 
c 
. 
Int "
(" #
nullable# +
:+ ,
false- 2
,2 3
identity4 <
:< =
true> B
)B C
,C D
FullName  
=! "
c# $
.$ %
String% +
(+ ,
), -
,- .
Address 
=  !
c" #
.# $
String$ *
(* +
)+ ,
,, -
MobileNo  
=! "
c# $
.$ %
String% +
(+ ,
), -
,- .

UserInfoId "
=# $
c% &
.& '
Int' *
(* +
nullable+ 3
:3 4
false5 :
): ;
,; <
} 
) 
. 

PrimaryKey 
( 
t 
=>  
t! "
." #
Id# %
)% &
. 

ForeignKey 
( 
$str ,
,, -
t. /
=>0 2
t3 4
.4 5

UserInfoId5 ?
,? @
cascadeDeleteA N
:N O
trueP T
)T U
. 
Index 
( 
t 
=> 
t 
. 

UserInfoId (
)( )
;) *
CreateTable 
( 
$str  
,  !
c 
=> 
new 
{ 
Id 
= 
c 
. 
Int "
(" #
nullable# +
:+ ,
false- 2
,2 3
identity4 <
:< =
true> B
)B C
,C D
MobileNo  
=! "
c# $
.$ %
String% +
(+ ,
), -
,- .

FacebookId "
=# $
c% &
.& '
String' -
(- .
). /
,/ 0
FacebookOTP #
=$ %
c& '
.' (
Int( +
(+ ,
nullable, 4
:4 5
false6 ;
); <
,< =
SkypeId   
=    !
c  " #
.  # $
String  $ *
(  * +
)  + ,
,  , -
SkypeOTP!!  
=!!! "
c!!# $
.!!$ %
Int!!% (
(!!( )
nullable!!) 1
:!!1 2
false!!3 8
)!!8 9
,!!9 :
SlackId"" 
=""  !
c""" #
.""# $
String""$ *
(""* +
)""+ ,
,"", -
SlackOTP##  
=##! "
c### $
.##$ %
Int##% (
(##( )
nullable##) 1
:##1 2
false##3 8
)##8 9
,##9 :
WebOTP$$ 
=$$  
c$$! "
.$$" #
Int$$# &
($$& '
nullable$$' /
:$$/ 0
false$$1 6
)$$6 7
,$$7 8
}%% 
)%% 
.&& 

PrimaryKey&& 
(&& 
t&& 
=>&&  
t&&! "
.&&" #
Id&&# %
)&&% &
;&&& '
CreateTable(( 
((( 
$str)) #
,))# $
c** 
=>** 
new** 
{++ 
Id,, 
=,, 
c,, 
.,, 
Int,, "
(,," #
nullable,,# +
:,,+ ,
false,,- 2
,,,2 3
identity,,4 <
:,,< =
true,,> B
),,B C
,,,C D

EmployeeId-- "
=--# $
c--% &
.--& '
Int--' *
(--* +
nullable--+ 3
:--3 4
false--5 :
)--: ;
,--; <
CasualLeaveBalance.. *
=..+ ,
c..- .
.... /
Int../ 2
(..2 3
nullable..3 ;
:..; <
false..= B
)..B C
,..C D
SickLeaveBalance// (
=//) *
c//+ ,
.//, -
Int//- 0
(//0 1
nullable//1 9
://9 :
false//; @
)//@ A
,//A B
AnnualLeaveBalance00 *
=00+ ,
c00- .
.00. /
Int00/ 2
(002 3
nullable003 ;
:00; <
false00= B
)00B C
,00C D
AvailedLeave11 $
=11% &
c11' (
.11( )
Int11) ,
(11, -
nullable11- 5
:115 6
false117 <
)11< =
,11= >
AvailedSickLeave22 (
=22) *
c22+ ,
.22, -
Int22- 0
(220 1
nullable221 9
:229 :
false22; @
)22@ A
,22A B
AvailedAnnualLeave33 *
=33+ ,
c33- .
.33. /
Int33/ 2
(332 3
nullable333 ;
:33; <
false33= B
)33B C
,33C D
}44 
)44 
.55 

PrimaryKey55 
(55 
t55 
=>55  
t55! "
.55" #
Id55# %
)55% &
;55& '
}77 	
public99 
override99 
void99 
Down99 !
(99! "
)99" #
{:: 	
DropForeignKey;; 
(;; 
$str;; *
,;;* +
$str;;, 8
,;;8 9
$str;;: J
);;J K
;;;K L
	DropIndex<< 
(<< 
$str<< %
,<<% &
new<<' *
[<<* +
]<<+ ,
{<<- .
$str<</ ;
}<<< =
)<<= >
;<<> ?
	DropTable== 
(== 
$str== )
)==) *
;==* +
	DropTable>> 
(>> 
$str>> &
)>>& '
;>>' (
	DropTable?? 
(?? 
$str?? %
)??% &
;??& '
}@@ 	
}AA 
}BB Ω
qD:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\Migrations\201711110831287_fix-relationship.cs
	namespace 	
HRMBot
 
. 

Repository 
. 

Migrations &
{ 
public 

partial 
class 
fixrelationship (
:) *
DbMigration+ 6
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
DropForeignKey

 
(

 
$str

 *
,

* +
$str

, 8
,

8 9
$str

: J
)

J K
;

K L
	DropIndex 
( 
$str %
,% &
new' *
[* +
]+ ,
{- .
$str/ ;
}< =
)= >
;> ?
	AddColumn 
( 
$str &
,& '
$str( 4
,4 5
c6 7
=>8 :
c; <
.< =
Int= @
(@ A
nullableA I
:I J
falseK P
)P Q
)Q R
;R S
CreateIndex 
( 
$str (
,( )
$str* 6
)6 7
;7 8
AddForeignKey 
( 
$str *
,* +
$str, 8
,8 9
$str: I
,I J
$strK O
,O P
cascadeDeleteQ ^
:^ _
true` d
)d e
;e f

DropColumn 
( 
$str &
,& '
$str( 4
)4 5
;5 6
} 	
public 
override 
void 
Down !
(! "
)" #
{ 	
	AddColumn 
( 
$str %
,% &
$str' 3
,3 4
c5 6
=>7 9
c: ;
.; <
Int< ?
(? @
nullable@ H
:H I
falseJ O
)O P
)P Q
;Q R
DropForeignKey 
( 
$str +
,+ ,
$str- 9
,9 :
$str; J
)J K
;K L
	DropIndex 
( 
$str &
,& '
new( +
[+ ,
], -
{. /
$str0 <
}= >
)> ?
;? @

DropColumn 
( 
$str '
,' (
$str) 5
)5 6
;6 7
CreateIndex 
( 
$str '
,' (
$str) 5
)5 6
;6 7
AddForeignKey 
( 
$str )
,) *
$str+ 7
,7 8
$str9 I
,I J
$strK O
,O P
cascadeDeleteQ ^
:^ _
true` d
)d e
;e f
} 	
} 
} ≤
zD:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\Migrations\201711110911170_designation-and-seed-data.cs
	namespace 	
HRMBot
 
. 

Repository 
. 

Migrations &
{ 
public 

partial 
class "
designationandseeddata /
:0 1
DbMigration2 =
{ 
public 
override 
void 
Up 
(  
)  !
{		 	
	AddColumn

 
(

 
$str

 %
,

% &
$str

' 4
,

4 5
c

6 7
=>

8 :
c

; <
.

< =
String

= C
(

C D
)

D E
)

E F
;

F G
} 	
public 
override 
void 
Down !
(! "
)" #
{ 	

DropColumn 
( 
$str &
,& '
$str( 5
)5 6
;6 7
} 	
} 
} û
^D:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\Migrations\Configuration.cs
	namespace 	
HRMBot
 
. 

Repository 
. 

Migrations &
{ 
internal

 
sealed

 
class

 
Configuration

 '
:

( )%
DbMigrationsConfiguration

* C
<

C D
HRMBot

D J
.

J K

Repository

K U
.

U V 
ApplicationDbContext

V j
>

j k
{ 
public 
Configuration 
( 
) 
{ 	&
AutomaticMigrationsEnabled &
=' (
false) .
;. /

ContextKey 
= 
$str A
;A B
} 	
	protected 
override 
void 
Seed  $
($ %
HRMBot% +
.+ ,

Repository, 6
.6 7 
ApplicationDbContext7 K
contextL S
)S T
{ 	
Employee 
[ 
] 
	employees  
=! "
{ 
new 
Employee 
{ 
FullName 
= 
$str 3
,3 4
Designation 
=  !
$str" 5
,5 6
MobileNo 
= 
$str ,
,, -
Address   
=   
$str   1
}!! 
,!! 
new"" 
Employee"" 
{## 
FullName$$ 
=$$ 
$str$$ 2
,$$2 3
Designation%% 
=%%  !
$str%%" =
,%%= >
MobileNo&& 
=&& 
$str&& ,
,&&, -
Address'' 
='' 
$str'' 1
}(( 
})) 
;)) 
context++ 
.++ 
	Employees++ 
.++ 
AddOrUpdate++ )
(++) *
	employees++* 3
)++3 4
;++4 5
},, 	
}-- 
}.. ’
QD:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\Models\User.cs
	namespace 	
HRMBot
 
. 

Repository 
. 
Models "
{ 
public		 

class		 
User		 
{

 
public 
string 
UserId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
string 
OneTimePassword %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
string 
MobileNumber "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string !
TemporaryMobileNumber +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
} 
} ô
VD:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\PersonRepository.cs
	namespace 	
HRMBot
 
. 

Repository 
{ 
public		 

class		 
PersonRepository		 !
:		" #
IDisposable		$ /
{

 
public 
void 
Dispose 
( 
) 
{ 	
} 	
public 
string  
GetPersonInformation *
(* +
string+ 1
name2 6
)6 7
{ 	
string 
message 
; 
if 
( 
name 
. 
Contains 
( 
$str '
)' (
||) +
name, 0
.0 1
Contains1 9
(9 :
$str: C
)C D
||E G
nameH L
.L M
ContainsM U
(U V
$strV ^
)^ _
||` b
namec g
.g h
Containsh p
(p q
$strq y
)y z
)z {
{ 
message 
= 
$str g
;g h
message 
+= 
$str e
;e f
} 
else 
if 
( 
name 
. 
Contains "
(" #
$str# *
)* +
||, .
name/ 3
.3 4
Contains4 <
(< =
$str= D
)D E
)E F
{ 
message 
= 
$str	 á
;
á à
} 
else 
{ 
message 
= 
$str Z
;Z [
string   
funadd   
=   
$str    v
;  v w
Random"" 
random"" 
="" 
new""  #
Random""$ *
(""* +
)""+ ,
;"", -
if## 
(## 
random## 
.## 
Next## 
(##  
$num##  !
,##! "
$num### $
)##$ %
==##& (
$num##) *
)##* +
{$$ 
message%% 
+=%% 
funadd%% %
;%%% &
}&& 
}'' 
return)) 
message)) 
;)) 
}** 	
},, 
}-- à
]D:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str ,
), -
]- .
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str .
). /
]/ 0
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[## 
assembly## 	
:##	 

AssemblyVersion## 
(## 
$str## $
)##$ %
]##% &
[$$ 
assembly$$ 	
:$$	 

AssemblyFileVersion$$ 
($$ 
$str$$ (
)$$( )
]$$) *º'
\D:\Codes\Projects\Others\Mahedee\gen-bot-hrm\src\HRMBot.Repository\UserRegisterRepository.cs
	namespace 	
HRMBot
 
. 

Repository 
{ 
public 

class "
UserRegisterRepository '
:( )#
IUserRegisterRepository* A
{ 
public

 
async

 
Task

 
<

 
string

  
>

  ! 
GenerateOtpCodeAsync

" 6
(

6 7
string

7 =
id

> @
,

@ A
string

B H
mobileNumber

I U
,

U V
string

W ]
name

^ b
)

b c
{ 	
var 
	generator 
= 
new 
Random  &
(& '
)' (
;( )
var 
otp 
= 
	generator 
.  
Next  $
($ %
$num% +
,+ ,
$num- 4
)4 5
.5 6
ToString6 >
(> ?
)? @
;@ A
using 
( 
var 
db 
= 
new  
ApplicationDbContext  4
(4 5
)5 6
)6 7
{ 
var 
user 
= 
await  
db! #
.# $
Users$ )
.) *
	FindAsync* 3
(3 4
id4 6
)6 7
;7 8
if 
( 
user 
== 
null  
)  !
{ 
user 
= 
new 
User #
{ 
UserId 
=  
id! #
,# $
OneTimePassword '
=( )
otp* -
,- .!
TemporaryMobileNumber -
=. /
mobileNumber0 <
,< =
Name 
= 
name #
} 
; 
db   
.   
Users   
.   
Add    
(    !
user  ! %
)  % &
;  & '
}!! 
else"" 
{## 
user$$ 
.$$ 
OneTimePassword$$ (
=$$) *
otp$$+ .
;$$. /
user%% 
.%% !
TemporaryMobileNumber%% .
=%%/ 0
mobileNumber%%1 =
;%%= >
}&& 
await(( 
db(( 
.(( 
SaveChangesAsync(( )
((() *
)((* +
;((+ ,
})) 
return** 
otp** 
;** 
}++ 	
public-- 
async-- 
Task-- 
<-- 
bool-- 
>-- 
VarifyOtpAsync--  .
(--. /
string--/ 5
id--6 8
,--8 9
string--: @
otp--A D
)--D E
{.. 	
var// 
success// 
=// 
false// 
;//  
using00 
(00 
var00 
db00 
=00 
new00  
ApplicationDbContext00  4
(004 5
)005 6
)006 7
{11 
var22 
user22 
=22 
await22  
db22! #
.22# $
Users22$ )
.22) *
	FindAsync22* 3
(223 4
id224 6
)226 7
;227 8
if44 
(44 
user44 
?44 
.44 
OneTimePassword44 )
!=44* ,
null44- 1
&&442 4
user445 9
.449 :
OneTimePassword44: I
.44I J
Equals44J P
(44P Q
otp44Q T
.44T U
Trim44U Y
(44Y Z
)44Z [
)44[ \
)44\ ]
{55 
user66 
.66 
MobileNumber66 %
=66& '
user66( ,
.66, -!
TemporaryMobileNumber66- B
;66B C
await77 
db77 
.77 
SaveChangesAsync77 -
(77- .
)77. /
;77/ 0
success88 
=88 
true88 "
;88" #
}99 
}:: 
return<< 
success<< 
;<< 
}== 	
public?? 
async?? 
Task?? 
<?? 
string??  
>??  !"
isAlreadyVerifiedAsync??" 8
(??8 9
string??9 ?
id??@ B
)??B C
{@@ 	
usingAA 
(AA 
varAA 
dbAA 
=AA 
newAA  
ApplicationDbContextAA  4
(AA4 5
)AA5 6
)AA6 7
{BB 
varCC 
userCC 
=CC 
awaitCC  
dbCC! #
.CC# $
UsersCC$ )
.CC) *
	FindAsyncCC* 3
(CC3 4
idCC4 6
)CC6 7
;CC7 8
returnDD 
userDD 
?DD 
.DD 
MobileNumberDD )
;DD) *
}EE 
}FF 	
}GG 
}HH 